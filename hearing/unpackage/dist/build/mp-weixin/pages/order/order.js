(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"31f5":function(t,e,o){"use strict";o.r(e);var n=o("6b3e"),a=o.n(n);for(var i in n)"default"!==i&&function(t){o.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"52d9":function(t,e,o){"use strict";var n={mescrollUni:function(){return Promise.all([o.e("common/vendor"),o.e("components/mescroll-uni/mescroll-uni")]).then(o.bind(null,"e6bf"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[];o.d(e,"b",(function(){return a})),o.d(e,"c",(function(){return i})),o.d(e,"a",(function(){return n}))},"6b3e":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("66fd")),a=s(o("17c9")),i=o("cea1");function s(t){return t&&t.__esModule?t:{default:t}}function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var c=function(){o.e("components/keyboard/keyboard").then(function(){return resolve(o("6990"))}.bind(null,o)).catch(o.oe)},u=function(){Promise.all([o.e("common/vendor"),o.e("components/mescroll-uni/mescroll-uni")]).then(function(){return resolve(o("e6bf"))}.bind(null,o)).catch(o.oe)},r={data:function(){return l({Color:"#333",backColor:"#fff",itemIndex:0,order:["全部","待付款","已预约","待使用","已使用"],show_key:!1,list:[],mescroll:null,downOption:{use:!0,auto:!0,autoShowLoading:!0,isLock:!1,isBoth:!0,offset:80,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ..."},upOption:{use:!0,auto:!0,isLock:!1,isBoth:!0,page:{num:0,size:10,time:null},noMoreSize:6,textLoading:"加载中 ...",textNoMore:"-- 已经到底了 --",toTop:{src:"http://www.mescroll.com/img/mescroll-totop.png",offset:1e3,duration:300},empty:{use:!0,icon:"http://www.mescroll.com/img/mescroll-empty.png",tip:"没有符合条件的订单"}},state:0,top:0,id:""},"show_key",!1)},components:{MescrollUni:u,payKeyboard:c},onUnload:function(){this.mescroll=null},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onLoad:function(t){t.type&&(this.state=t.type,this.itemIndex=t.type)},onShow:function(){this.mescroll&&(this.list=[],this.mescroll.resetUpScroll());var e=this;t.getSystemInfo({success:function(t){n.default.prototype.StatusBar=t.statusBarHeight;var o=wx.getMenuButtonBoundingClientRect();n.default.prototype.Custom=o,n.default.prototype.CustomBar=o.bottom+o.top-t.statusBarHeight,e.top=n.default.prototype.CustomBar}})},methods:{showFun:function(t){this.show_key=!0,this.id=t},hideFun:function(){this.show_key=!1},getPassword:function(e){var o=this;this.show_key=!1;var n={cmd:"checkOrder",id:this.id,merchant_id:e.password,uid:t.getStorageSync("uid")};a.default.showLoading("",(function(){var t={data:n,success:function(t){0==t.data.result?(a.default.hideLoading(),a.default.showToast("核销成功"),o.list=[],o.mescroll.resetUpScroll()):(a.default.hideLoading(),a.default.showToast(t.data.resultNote))}};(0,i.ajax)(t)}))},changeNav:function(t){this.itemIndex!=t&&(this.itemIndex=t,this.state=t,this.list=[],this.mescroll.resetUpScroll())},goCancel:function(e){t.navigateTo({url:"/pages/cancel/cancel?id="+e})},goBack:function(e){t.navigateTo({url:"/pages/backMoney/backMoney?id="+e})},goDetail:function(e){t.navigateTo({url:"/pages/orderDetail/orderDetail?id="+e})},goPay:function(e){var o=this;t.login({provider:"weixin",success:function(n){console.log(n.code),t.getUserInfo({success:function(s){console.log(s);var l={cmd:"payOrder",uid:t.getStorageSync("uid"),id:e,code:n.code,userInfo:s.userInfo,type:3};a.default.showLoading("",(function(){var e={data:l,success:function(e){console.log(e),0==e.data.result?(a.default.hideLoading(),t.requestPayment({provider:"wxpay",timeStamp:e.data.body.timeStamp,nonceStr:e.data.body.nonceStr,package:e.data.body.package,signType:e.data.body.signType,paySign:e.data.body.paySign,success:function(t){console.log(t),o.list=[],o.mescroll.resetUpScroll()},fail:function(t){a.default.showToast(t)}})):(a.default.hideLoading(),a.default.showToast(e.data.resultNote))}};(0,i.ajax)(e)}))}})}})},goFinish:function(e){var o=this,n={cmd:"completeOrder",id:e,uid:t.getStorageSync("uid")};a.default.showLoading("",(function(){var t={data:n,success:function(t){0==t.data.result?(a.default.hideLoading(),a.default.showToast("预约完成"),o.list=[],o.mescroll.resetUpScroll()):(a.default.hideLoading(),a.default.showToast(t.data.resultNote))}};(0,i.ajax)(t)}))},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){this.list=[],this.mescroll.resetUpScroll()},upCallback:function(t){t.num,t.size;var e=this;e.init(t)},topClick:function(){console.log("点击了回到顶部按钮")},init:function(e){var o=this,n={cmd:"orderList",uid:t.getStorageSync("uid"),nowPage:e.num,state:this.state};a.default.showLoading("",(function(){var t={data:n,success:function(t){if(console.log(t),0==t.data.result){if(a.default.hideLoading(),t.data.dataList)for(var n=0;n<t.data.dataList.length;n++)o.list.push(t.data.dataList[n])}else a.default.hideLoading(),a.default.showToast(t.data.resultNote);var i=[];t.data.dataList&&(i=t.data.dataList);var s=1;t.data.totalPage&&(s=t.data.totalPage),e.endByPage(i.length,s)}};(0,i.ajax)(t)}))},Back:function(){t.switchTab({url:"/pages/my/my"})}}};e.default=r}).call(this,o("543d")["default"])},"79e2":function(t,e,o){"use strict";var n=o("f905"),a=o.n(n);a.a},b2c0:function(t,e,o){"use strict";o.r(e);var n=o("52d9"),a=o("31f5");for(var i in a)"default"!==i&&function(t){o.d(e,t,(function(){return a[t]}))}(i);o("79e2");var s,l=o("f0c5"),c=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"7eaf3754",null,!1,n["a"],s);e["default"]=c.exports},cfe8:function(t,e,o){"use strict";(function(t){o("7954");n(o("66fd"));var e=n(o("b2c0"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},f905:function(t,e,o){}},[["cfe8","common/runtime","common/vendor"]]]);