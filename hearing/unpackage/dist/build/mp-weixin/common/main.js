(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"038d":function(t,e,a){"use strict";(function(t,e){a("7954");var o=f(a("66fd")),n=f(a("5969")),u=f(a("9c59")),r=f(a("c5ed")),l=f(a("8f6b"));a("512b");var c=a("ead1"),d=f(a("ab73")),i=f(a("f839"));function f(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function p(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){m(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function m(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}o.default.prototype.$store=r.default,o.default.config.productionTip=!1;var E=function(){a.e("colorui/components/cu-custom").then(function(){return resolve(a("c947"))}.bind(null,a)).catch(a.oe)};o.default.component("cu-custom",E),n.default.mpType="app";var T=u.default.create({SDKAppID:1400370159});T.setLogLevel(0),wx.$app=T,wx.$app.registerPlugin({"cos-wx-sdk":d.default}),wx.store=r.default,wx.TIM=u.default,wx.dayjs=l.default,l.default.locale("zh-cn");var v=new o.default;function g(t){var e=t.name;console.log("ready");var a=e===u.default.EVENT.SDK_READY;a&&(wx.$app.getMyProfile().then((function(t){r.default.commit("updateMyInfo",t.data)})),wx.$app.getBlacklist().then((function(t){r.default.commit("setBlacklist",t.data)}))),r.default.commit("setSdkReady",a)}function b(e){r.default.dispatch("resetStore"),wx.showToast({title:"你已被踢下线",icon:"none",duration:1500}),setTimeout((function(){t.clearStorageSync(),t.reLaunch({url:"/pages/login/login"})}),500)}function y(t){t.data.message&&t.data.code&&2800!==t.data.code&&2999!==t.data.code&&r.default.commit("showToast",{title:t.data.message,duration:2e3})}function S(t){switch(t){case u.default.TYPES.NET_STATE_CONNECTED:return{title:"已接入网络",duration:2e3};case u.default.TYPES.NET_STATE_CONNECTING:return{title:"当前网络不稳定",duration:2e3};case u.default.TYPES.NET_STATE_DISCONNECTED:return{title:"当前网络不可用",duration:2e3};default:return""}}function O(t){console.log(t.data.state),r.default.commit("showToast",S(t.data.state))}function w(t){for(var e=0;e<t.data.length;e++){var a=t.data[e];if(a.type===i.default.MSG_GRP_TIP&&a.payload.operationType&&v.$emit("groupNameUpdate",a.payload),a.type===i.default.MSG_CUSTOM&&(0,c.isJSON)(a.payload.data)){var o=JSON.parse(a.payload.data);if(3===o.version)switch(o.action){case 0:if(r.default.getters.isCalling)v.$emit("isCalling",a);else{var n="../call/main?args=".concat(a.payload.data,"&&from=").concat(a.from,"&&to=").concat(a.to);wx.navigateTo({url:n})}break;case 1:wx.navigateBack({delta:1});break;case 2:v.$emit("onRefuse");break;case 3:wx.navigateBack({delta:1});break;case 4:v.$emit("onCall",o);break;case 5:v.$emit("onClose");break;case 6:v.$emit("onBusy");break;default:break}}}r.default.dispatch("onMessageEvent",t)}function N(t){r.default.commit("updateAllConversation",t.data)}function _(t){r.default.commit("updateGroupList",t.data)}function h(t){r.default.commit("updateBlacklist",t.data)}o.default.prototype.TIM=u.default,o.default.prototype.$type=i.default,o.default.prototype.$store=r.default,o.default.prototype.$bus=v,T.on(u.default.EVENT.SDK_READY,g,void 0),T.on(u.default.EVENT.SDK_NOT_READY,g,void 0),T.on(u.default.EVENT.KICKED_OUT,b,void 0),T.on(u.default.EVENT.ERROR,y,void 0),T.on(u.default.EVENT.MESSAGE_RECEIVED,w,void 0),T.on(u.default.EVENT.CONVERSATION_LIST_UPDATED,N,void 0),T.on(u.default.EVENT.GROUP_LIST_UPDATED,_,void 0),T.on(u.default.EVENT.BLACKLIST_UPDATED,h,void 0),T.on(u.default.EVENT.NET_STATE_CHANGE,O,void 0);var D=new o.default(p({},n.default,{store:r.default}));e(D).$mount()}).call(this,a("543d")["default"],a("543d")["createApp"])},5969:function(t,e,a){"use strict";a.r(e);var o=a("e2b8");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("e9ad");var u,r,l,c,d=a("f0c5"),i=Object(d["a"])(o["default"],u,r,!1,null,null,null,!1,l,c);e["default"]=i.exports},"5ecf":function(t,e,a){},e2b8:function(t,e,a){"use strict";a.r(e);var o=a("eeff"),n=a.n(o);for(var u in o)"default"!==u&&function(t){a.d(e,t,(function(){return o[t]}))}(u);e["default"]=n.a},e9ad:function(t,e,a){"use strict";var o=a("5ecf"),n=a.n(o);n.a},eeff:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(a("66fd"));function n(t){return t&&t.__esModule?t:{default:t}}var u={onLaunch:function(){var e=this;t.getSystemInfo({success:function(t){e.$store.commit("setSystemInfo",t),o.default.prototype.StatusBar=t.statusBarHeight;var a=wx.getMenuButtonBoundingClientRect();o.default.prototype.Custom=a,o.default.prototype.CustomBar=a.bottom+a.top-t.statusBarHeight}})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};e.default=u}).call(this,a("543d")["default"])}},[["038d","common/runtime","common/vendor"]]]);