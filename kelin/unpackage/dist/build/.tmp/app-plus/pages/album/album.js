(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/album/album"],{"238b":function(e,t,a){"use strict";(function(e,s){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(a("56cf")),i=l(a("46c0")),n=a("b992");function l(e){return e&&e.__esModule?e:{default:e}}var u={data:function(){return{Color:"#333",store:!1,liked:!1,val:"",show:!1,listData:[],obj:{},obj1:{},count:0,total:0,size:0,ids:"",href:""}},onLoad:function(t){this.message=e.getStorageSync("message"),this.ids=t.id,this.obj1=JSON.parse(t.list),t.lists?(this.obj=JSON.parse(t.lists),console.log(s(this.obj," at pages\\album\\album.vue:95")),this.count=this.obj.likedCount,this.store=this.obj.collected,this.liked=this.obj.liked,this.size=(this.obj.size/1048576).toFixed(2)):this.initData(),this.init(t.id)},methods:{init:function(e){var t=this,a={Token:this.message.Token,id:e,infoType:3};o.default.showLoading("加载中...",function(){var e={url:"/app/service/product/similar",data:a,success:function(e){console.log(s(e," at pages\\album\\album.vue:118")),1==e.data.success?(o.default.hideLoading(),"undefined"!=e.data.body.list&&e.data.body.list.length>0&&(t.listData=e.data.body.list)):(o.default.hideLoading(),o.default.showToast(e.data.msg))}};(0,n.ajax)(e)})},initData:function(e){var t=this;t.obj1=e;var a={Token:this.message.Token,id:e.id,infoType:3};o.default.showLoading("加载中...",function(){var i={url:"/app/service/product/additional",data:a,success:function(a){console.log(s(a," at pages\\album\\album.vue:147")),1==a.data.success?(o.default.hideLoading(),t.obj=a.data.body.info,t.store=t.obj.collected,t.liked=t.obj.liked,t.ids=t.obj.product.id,t.count=t.obj.likedCount,t.size=(t.obj.size/1048576).toFixed(2),t.init(e.id)):(o.default.hideLoading(),o.default.showToast(a.data.msg))}};(0,n.ajax)(i)})},goStore:function(){var e=this;if(this.store){var t={Token:this.message.Token,id:this.ids,infoType:3},a={url:"/app/service/collect/delete",data:t,success:function(t){console.log(s(t," at pages\\album\\album.vue:200")),1==t.data.success?(e.store=!e.store,o.default.showToast("取消收藏")):o.default.showToast(t.data.msg)}};(0,n.ajax)(a)}else{var i={Token:this.message.Token,id:this.ids,infoType:3},l={url:"/app/service/collect/add",data:i,success:function(t){console.log(s(t," at pages\\album\\album.vue:179")),1==t.data.success?(e.store=!e.store,o.default.showToast("收藏成功")):o.default.showToast(t.data.msg)}};(0,n.ajax)(l)}},goZan:function(){var e=this;if(this.liked){var t={Token:this.message.Token,id:this.ids,infoType:3},a={url:"/app/service/like/delete",data:t,success:function(t){console.log(s(t," at pages\\album\\album.vue:247")),1==t.data.success?(e.count--,e.liked=!e.liked,o.default.showToast("取消点赞")):o.default.showToast(t.data.msg)}};(0,n.ajax)(a)}else{var i={Token:this.message.Token,id:this.ids,infoType:3},l={url:"/app/service/like/add",data:i,success:function(t){console.log(s(t," at pages\\album\\album.vue:225")),1==t.data.success?(e.count++,e.liked=!e.liked,o.default.showToast("点赞成功")):o.default.showToast(t.data.msg)}};(0,n.ajax)(l)}},goDown:function(){var e=this;o.default.showLoading("下载中...",function(){plus.io.resolveLocalFileSystemURL("_downloads/"+e.obj.name,function(e){e.isFile&&(o.default.hideLoading(),o.default.showToast("文件已存在:"+e.fullPath))},function(){var t=plus.downloader.createDownload(e.obj.content,{filename:"_downloads/"+e.obj.name},function(t,a){200==a?(o.default.hideLoading(),o.default.showToast("下载成功"),plus.io.resolveLocalFileSystemURL("_downloads/"+e.obj.name,function(e){e.isFile&&o.default.showToast(e.fullPath)})):o.default.showToast("下载失败: "+a)});t.start()})})},downloader:function(t){var a="https://sale.clingcenter.net/"+t;e.navigateTo({url:"/pages/parse/parse?url=".concat(a,"&type=0")})},onBackPress:function(){if(this.shareObj.shareMenu.isVisible())return this.shareObj.shareMenu.hide(),this.shareObj.alphaBg.hide(),!0},shareInfo:function(){var t=this,a={href:"https://sale.clingcenter.net/static/share/productAlbum.html?ids=".concat(this.ids,"&token=").concat(this.message.Token),title:this.obj1.name,desc:this.obj1.textIntroduce,imgUrl:this.obj1.coverImage},o=[{icon:"/static/images/wx.png",text:"微信好友"},{icon:"/static/images/pyq.png",text:"朋友圈"},{icon:"/static/images/qq.png",text:"QQ"}];this.shareObj=(0,i.default)(a,o,function(t){var o={href:a.href||"",title:a.title||"",summary:a.desc||"",success:function(e){console.log(s("success:"+JSON.stringify(e)," at pages\\album\\album.vue:358"))},fail:function(e){console.log(s("fail:"+JSON.stringify(e)," at pages\\album\\album.vue:361"))}};switch(t){case 0:o.provider="weixin",o.scene="WXSceneSession",o.type=0,o.imageUrl=a.imgUrl||"",e.share(o);break;case 1:o.provider="weixin",o.scene="WXSenceTimeline",o.type=0,o.imageUrl=a.imgUrl||"",e.share(o);break;case 2:o.provider="qq",o.type=1,o.imageUrl=a.imgUrl||"",e.share(o);break}}),this.$nextTick(function(){t.shareObj.alphaBg.show(),t.shareObj.shareMenu.show()})},maxFont:function(){this.val.length>=100?o.default.showToast("反馈内容不能超过100字"):this.total=this.val.length},goSuggest:function(){this.show=!0},goSubmit:function(){var e=this;if(""!=e.val){var t={Token:this.message.Token,id:this.ids,infoType:3,content:this.val};o.default.showLoading("加载中...",function(){var a={url:"/app/service/feedback/add",data:t,success:function(t){1==t.data.success?(o.default.hideLoading(),e.show=!1,e.val="",e.total=0,o.default.showToast("提交成功")):(o.default.hideLoading(),o.default.showToast(t.data.msg))}};(0,n.ajax)(a)})}else o.default.showToast("内容不能为空")},goUpload:function(){e.switchTab({url:"/pages/upload/upload"})},goHide:function(){this.show=!1}}};t.default=u}).call(this,a("6e42")["default"],a("0de9")["default"])},"2e96":function(e,t,a){"use strict";a.r(t);var s=a("f272"),o=a("48dc");for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);a("8453");var n,l=a("f0c5"),u=Object(l["a"])(o["default"],s["b"],s["c"],!1,null,"7c563fac",null,!1,s["a"],n);t["default"]=u.exports},"48dc":function(e,t,a){"use strict";a.r(t);var s=a("238b"),o=a.n(s);for(var i in s)"default"!==i&&function(e){a.d(t,e,function(){return s[e]})}(i);t["default"]=o.a},8453:function(e,t,a){"use strict";var s=a("854c"),o=a.n(s);o.a},"854c":function(e,t,a){},"8aff":function(e,t,a){"use strict";(function(e){a("0ad5"),a("921b");s(a("66fd"));var t=s(a("2e96"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("6e42")["createPage"])},f272:function(e,t,a){"use strict";var s,o=function(){var e=this,t=e.$createElement,s=(e._self._c,a("71a0")),o=a("e05b"),i=a("d08a");e.$mp.data=Object.assign({},{$root:{m0:s,m1:o,m2:i}})},i=[];a.d(t,"b",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return s})}},[["8aff","common/runtime","common/vendor"]]]);