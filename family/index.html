<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>启动页</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<link rel="stylesheet" href="css/demo.css" />
		<link rel="stylesheet" href="css/vant.css">
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/index.css" />
	</head>

	<body>
		<div id="app" class="list" v-cloak>
			<img :src="url" alt="" />
			<div class="back">
				<span>{{num}}s 后退出</span>
			</div>
		</div>                                      

		<script src="js/flexible.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/vant.js"></script>
		<script src="js/common.js"></script>
		<script src="js/app.js"></script>
		<script type="text/javascript">
			mui.init();
			var start = new Vue({
				el: "#app",
				data: {
					num: 4,
					url: ''
				},
				created: function() {
					this.onLoad();
				},
				mounted: function() {
					this.back();
				},
				methods: {
					onLoad: function() {
						datas = {
							cmd: "startuppage"
						}
						ajax(datas, this.successLoad);
					},
					successLoad: function(res) {
						if(res.result == 0) {
							this.url = res.dataobject;
						}
					},
					back: function() {
						var that = this;
						var timer = setInterval(function() {
							if(that.num == 0) {
								clearInterval(timer);
								var state = localStorage.getItem('$state');
								if(state != null) {
									window.location.href = "./first.html";
								} else {
									window.location.href = "./login.html";
								}
							} else {
								that.num--;
							}
						}, 1000)
					}
				}
			});
		</script>
	</body>

</html>