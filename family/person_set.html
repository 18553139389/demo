<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>设置</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<meta name="format-detection" content="telephone=yes" />
		<link rel="stylesheet" href="css/demo.css" />
		<link rel="stylesheet" href="css/vant.css">
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/person_set.css" />
	</head>

	<body>
		<div id="app" class="list" v-cloak>
			<div class="navTop">
				个人设置
				<img class="back" src="./images/back_top.png" @tap="goBack" />
			</div>
			<ul class="list_item">
				<li id="help" @tap="goHelp">
					<span>帮助</span>
					<img src="images/car_right.png" alt="" />
				</li>
				<li id="about" @tap="goAbout">
					<span>关于我们</span>
					<img src="images/car_right.png" alt="" />
				</li>
				<li id="tel">
					<span>客服热线</span>
					<a :href="'tel:'+phone" style="color: #19B8EF;">{{phone}}</a>
				</li>
				<li id="update" @tap="goUpdate">
					<span>版本更新</span>
					<img src="images/car_right.png" alt="" />
				</li>
				<li id="storage" @tap="goStorage">
					<span>清除缓存</span>
					<img src="images/car_right.png" alt="" />
				</li>
				<li id="suggest" @tap="goSuggest">
					<span>意见反馈</span>
					<img src="images/car_right.png" alt="" />
				</li>
				<li id="exit" @tap="backOrder">
					<span>退出登录</span>
					<img src="images/car_right.png" alt="" />
				</li>
			</ul>
		</div>

		<script src="js/flexible.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/vant.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/common.js"></script>
		<script src="js/app.js"></script>
		<script>
			(function() {
				var set = new Vue({
					el: "#app",
					data: {
						phone: ''
					},
					mounted: function() {
						this.onLoad();
					},
					methods: {
						onLoad: function() {
							var that = this;
							var id = setInterval(function() {
								var state = app.getState();
								var uid = state.uid;
								if(uid == undefined) {
									return
								} else {
									clearInterval(id);
									var datas = {
										cmd: "getUserInfo",
										uid: uid
									}
									ajax(datas, that.successLoad);
								}
							}, 200);
						},
						successLoad: function(res) {
							if(res.result == 0) {
								this.phone = res.dataobject.customerphone;
							}
						},
						goBack: function() {
							window.history.go(-1);
						},
						goHelp: function() {
							window.location.href = './help.html';
						},
						goAbout: function() {
							window.location.href = './about.html';
						},
						goUpdate: function() {
							window.location.href = './update.html';
						},
						goStorage: function() {
							window.location.href = './storage.html';
						},
						goSuggest: function() {
							window.location.href = './suggest.html';
						},
						backOrder: function() {
							//退出操作
							this.$dialog.confirm({
								title: '退出',
								message: '确定要退出登录吗'
							}).then(() => {
								localStorage.clear();
								setTimeout(function() {
									window.location.href = "./login.html";
								}, 300);
							}).catch(() => {
								return;
							});
						}
					}
				});
				mui.init();
			})();
		</script>
	</body>

</html>