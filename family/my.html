<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>个人中心</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="css/demo.css" />
		<link rel="stylesheet" href="css/vant.css">
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/my.css" />
	</head>

	<body>
		<div id="app" class="list" v-cloak>
			<div class="message">
				<template v-for="v in msg">
					<div class="head">
						<img v-lazy="v.icon" alt="" />
					</div>
					<span>{{v.nickname}}</span>
				</template>
			</div>
			<div class="tab">
				<div class="tab_item" id="person" @tap="goPerson">
					<img src="./images/person_msg.png" alt="" />
					<span>个人信息</span>
				</div>
				<div class="tab_item" id="store" @tap="goStore">
					<img src="./images/person_store.png" alt="" />
					<span>我的收藏</span>
				</div>
				<div class="tab_item" id="set" @tap='goSet'>
					<img src="./images/person_set.png" alt="" />
					<span>设置</span>
				</div>
			</div>
			<nav-bar :active="active" @choice="choice"></nav-bar>
		</div>
		<script src="js/flexible.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/vant.js"></script>
		<script src="js/lazyload.js"></script>
		<script src="js/main.js"></script>
		<script src="js/common.js"></script>
		<script src="js/app.js"></script>
		<script>
			//实现图片的懒加载方法
			Vue.use(VueLazyload, {
				loading: "./images/60x60.gif",
				listenEvents: ['touchmove']
			});
			var my = new Vue({
				el: "#app",
				data: {
					msg: [],
					active: 3
				},
				created: function() {
					this.onLoad();
				},
				methods: {
					onLoad: function() {
						var that = this;
						var state = app.getState();
						var uid = state.uid;
						var datas = {
							cmd: "getUserInfo",
							uid: uid
						}
						ajax(datas, that.successLoad);
					},
					successLoad: function(res) {
						if(res.result == 0) {
							this.msg.push(res.dataobject);
						}
					},
					choice: function(item) {
						if(item == 0) {
							window.location.href = "./first.html";
						} else if(item == 1) {
							window.location.href = "./information.html";
						} else if(item == 2) {
							window.location.href = "./baby.html";
						} else if(item == 3) {
							window.location.href = "./my.html";
						}
					},
					goPerson: function() {
						window.location.href = "person_message.html";
					},
					goStore: function() {
						window.location.href = "store.html";
					},
					goSet: function() {
						window.location.href = "person_set.html";
					}
				}
			});
		</script>
	</body>

</html>