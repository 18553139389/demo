<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>关于我们</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
		<link rel="stylesheet" href="css/demo.css" />
		<link rel="stylesheet" href="css/mui.min.css">
		<link rel="stylesheet" href="css/about.css" />
	</head>

	<body>
		<div id="app" class="list" v-cloak>
			<div class="navTop">
				关于我们
				<img class="back" src="./images/back_top.png" @tap="goBack" />
			</div>
			<div id="bg">
				<div id="loading" class="loading">
					<img src="images/loading.gif" alt="" />
				</div>
			</div>
			<iframe id="dom" :src="url" frameborder="0" scrolling="auto"></iframe>
		</div>
		<script src="js/flexible.js"></script>
		<script src="js/jquery.js"></script>
		<script src="js/mui.min.js"></script>
		<script src="js/vue.js"></script>
		<script src="js/common.js"></script>
		<script src="js/app.js"></script>
		<script>
			(function() {
				var help = new Vue({
					el: "#app",
					data: {
						url: ''
					},
					mounted: function() {
						this.onLoad();
					},
					methods: {
						onLoad: function() {
							var that = this;
							var id = setInterval(function() {
								var state = app.getState();
								var uid = state.uid;
								if(uid == undefined) {
									return
								} else {
									clearInterval(id);
									var datas = {
										cmd: "getUserInfo",
										uid: uid
									}
									ajax(datas, that.successLoad);
								}
							}, 200);
						},
						successLoad: function(res) {
							if(res.result == 0) {
								this.url = res.dataobject.aboutus;
								loadEnd('dom', 'bg');
							}
						},
						goBack: function() {
							window.history.go(-2);
						}
					}
				});
				mui.init();
			})();

			//iframe窗口加载状态
			function loadEnd(id, ids) {
				var list = document.getElementById(id);
				document.getElementById(ids).style.display = 'block';
				if(list) {
					list.onload = function() {
						document.getElementById(ids).style.display = 'none';
						list.height = '95%';
					}
				}
			}
		</script>
	</body>

</html>