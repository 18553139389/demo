(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{1726:function(t,e,n){},"1eb1":function(t,e,n){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("01bc"),i=s(n("d4ef"));function s(t){return t&&t.__esModule?t:{default:t}}var c=function(){return Promise.all([n.e("common/vendor"),n.e("components/chunLei-modal/chunLei-modal")]).then(n.bind(null,"132f"))},u=function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"0196"))},l={data:function(){return{StatusBar:this.StatusBar,autoplay:!0,interval:5e3,message:{},count:0,swiperList:[],list:[],time:"",value:!1,ids:"",inputData:{content:[{title:"修改重量：",content:"",unit:"",type:"number",placeholder:""}]},type1:"input",totalPage:0,mescroll:null,downOption:{use:!0,auto:!0,autoShowLoading:!0,isLock:!1,isBoth:!0,offset:80,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ..."},upOption:{use:!0,auto:!0,isLock:!1,isBoth:!0,page:{num:0,size:5,time:null},noMoreSize:6,textLoading:"加载中 ...",textNoMore:"-- 没有更多数据 --",toTop:{src:"http://www.mescroll.com/img/mescroll-totop.png",offset:1e3,duration:300},empty:{use:!0,icon:"http://www.mescroll.com/img/mescroll-empty.png",tip:"没有进出记录数据"}}}},components:{MescrollUni:u,chunLeiModal:c},onHide:function(){clearInterval(this.time)},onUnload:function(){clearInterval(this.time),this.mescroll=null},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onShow:function(){this.init()},computed:{style:function(){var t=this.StatusBar,e="padding-top:".concat(t,"px;");return e}},methods:{mescrollInit:function(t){this.mescroll=t},downCallback:function(t){this.list=[],this.mescroll.resetUpScroll()},upCallback:function(t){t.num,t.size;var e=this;e.getReport(t)},topClick:function(){console.log(t("点击了回到顶部按钮"," at pages\\index\\index.vue:219"))},getReport:function(e){var n=this,s=e.num,c=e.size,u={token:o.getStorageSync("token"),begintime:"",endtime:"",pageno:s,pagesize:c,os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")},l={url:"/api/Truck/AllRecords",data:u,success:function(a){console.log(t(a," at pages\\index\\index.vue:240")),0==a.data.Code?a.data.Customerdata.forEach(function(t){n.list.push(t)}):-2==a.data.Code||-1==a.data.Code?(i.default.showToast(a.data.Description),o.removeStorageSync("token"),setTimeout(function(){o.redirectTo({url:"/pages/login/login"})},500)):i.default.showToast(a.data.Description);var s=a.data.Customerdata,c=a.data.Extra.Recordcount;e.endByPage(s.length,c)}};(0,a.ajax)(l)},goCount:function(){o.navigateTo({url:"/pages/all/all"})},useCount:function(){o.navigateTo({url:"/pages/useList/useList"})},init:function(){var e=this;if(o.getStorageSync("cid")&&null!=o.getStorageSync("cid")){var n=o.getStorageSync("cid");this.getCid(n)}else var s=setInterval(function(){var t=plus.push.getClientInfo();"null"!=t.clientid&&t.clientid&&null!=t.clientid&&(o.setStorageSync("cid",t.clientid),clearInterval(s),e.getCid(t.clientid))},300);var c={token:o.getStorageSync("token"),os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")};i.default.showLoading("",function(){var n={url:"/api/CompanyUser/account",data:c,success:function(n){console.log(t(JSON.stringify(n)," at pages\\index\\index.vue:302")),0==n.data.Code?(i.default.hideLoading(),e.goVersion(),e.message=n.data.Customerdata,o.setStorageSync("cnname",n.data.Customerdata.cnname),o.setStorageSync("job",n.data.Customerdata.job),o.setStorageSync("id",n.data.Customerdata.companyid),o.setStorageSync("jobid",n.data.Customerdata.jobid),o.setStorageSync("enable",n.data.Customerdata.editable),e.time=setInterval(function(){e.getNotice(n.data.Customerdata.companyid,n.data.Customerdata.account)},2e3),n.data.Customerdata.appbanner.forEach(function(t){e.swiperList.push(t)})):-2==n.data.Code||-1==n.data.Code?(i.default.hideLoading(),i.default.showToast(n.data.Description),o.removeStorageSync("token"),setTimeout(function(){o.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(n.data.Description))}};(0,a.ajax)(n)})},goVersion:function(){var e=this,n={token:o.getStorageSync("token"),os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")};i.default.showLoading("",function(){var s={url:"/api/Upgrade/Req",data:n,success:function(n){console.log(t(JSON.stringify(n)," at pages\\index\\index.vue:349")),0==n.data.Code?(i.default.hideLoading(),0==n.data.Customerdata.isforce?o.showModal({title:"在线升级",content:n.data.Customerdata.Trips,success:function(o){o.confirm?(plus.nativeUI.showWaiting("下载最新文件中,请稍候..."),plus.downloader.createDownload(n.data.Customerdata.apk,{filename:"_doc/update/"},function(n,o){200==o?(plus.nativeUI.closeWaiting(),console.log(t("下载wgt成功："+n.filename," at pages\\index\\index.vue:364")),e.installWgt(n.filename)):(console.log(t("下载wgt失败！"," at pages\\index\\index.vue:367")),plus.nativeUI.alert("下载APP失败！"))}).start()):o.cancel&&console.log(t("用户点击取消"," at pages\\index\\index.vue:372"))}}):o.showModal({title:"在线升级",content:n.data.Customerdata.Trips,showCancel:!1,success:function(o){o.confirm?(plus.nativeUI.showWaiting("下载最新文件中,请稍候..."),plus.downloader.createDownload(n.data.Customerdata.apk,{filename:"_doc/update/"},function(n,o){200==o?(plus.nativeUI.closeWaiting(),console.log(t("下载wgt成功："+n.filename," at pages\\index\\index.vue:389")),e.installWgt(n.filename)):(console.log(t("下载wgt失败！"," at pages\\index\\index.vue:392")),plus.nativeUI.alert("下载APP失败！"))}).start()):o.cancel&&console.log(t("用户点击取消"," at pages\\index\\index.vue:397"))}})):-1==n.data.Code?i.default.hideLoading():-2==n.data.Code?(i.default.hideLoading(),i.default.showToast(n.data.Description),o.removeStorageSync("token"),setTimeout(function(){o.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(n.data.Description))}};(0,a.ajax)(s)})},installWgt:function(t){plus.nativeUI.showWaiting("正在安装..."),plus.runtime.install(t,{force:!0},function(){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("APP更新完成！",function(){plus.runtime.restart()})},function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("安装失败："+t.message)})},getCid:function(e){plus.device.getInfo({success:function(n){console.log(t("getDeviceInfo success: "+JSON.stringify(n)," at pages\\index\\index.vue:441"));var i=n.uuid,s={token:o.getStorageSync("token"),cid:e,deviceid:i,os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")},c={url:"/api/CompanyUser/Updcid",data:s,success:function(e){console.log(t(JSON.stringify(e)," at pages\\index\\index.vue:455"))}};(0,a.ajax)(c)},fail:function(e){console.log(t("getDeviceInfo failed: "+JSON.stringify(e)," at pages\\index\\index.vue:461"))}})},getNotice:function(e,n){var i=this,s={companyid:e,account:n,os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")},c={url:"/api/Notice/NewNoticeCounter",data:s,success:function(e){console.log(t(JSON.stringify(e)," at pages\\index\\index.vue:479")),0==e.data.Code&&(e.data.Customerdata.cnt>99?i.count="99+":i.count=e.data.Customerdata.cnt)}};(0,a.ajax)(c)},goTell:function(){o.navigateTo({url:"/pages/user/user"})},goMessage:function(){o.navigateTo({url:"/pages/message/message"})},goProduct:function(){o.navigateTo({url:"/pages/product/product"})},goReport:function(){this.$store.commit("changeProductState",""),this.$store.commit("changeProductItem",""),this.$store.commit("changeCarNum",""),o.navigateTo({url:"/pages/report/report"})},goSet:function(){o.navigateTo({url:"/pages/set/set"})},goLook:function(){o.navigateTo({url:"/pages/look/look"})},goUrl:function(t,e){""!=e&&null!=e&&o.navigateTo({url:"/pages/rich/rich?title="+t+"&url="+e})},viewRecord:function(t,e){""!=e&&null!=e&&o.navigateTo({url:"/pages/text/text?title="+t+"&billno="+e+"&apisecret="+o.getStorageSync("apisecret")})},changeWeight:function(t,e){0!=o.getStorageSync("enable")&&(this.value=!0,this.ids=t,this.inputData.content[0].content=e.goodsweight,this.inputData.content[0].unit=e.goodsweightunit)},onConfirm3:function(t){var e=this,n={token:o.getStorageSync("token"),id:this.ids,goodsjsweight:t[0].content,os:o.getSystemInfoSync().platform,osversion:o.getSystemInfoSync().system,appversion:o.getStorageSync("appversion")};i.default.showLoading("",function(){var t={url:"/api/Truck/ModifyRecords",data:n,success:function(t){0==t.data.Code?(i.default.hideLoading(),i.default.showToast("修改成功"),e.init()):-2==t.data.Code||-1==t.data.Code?(i.default.hideLoading(),i.default.showToast(t.data.Description),o.removeStorageSync("token"),setTimeout(function(){o.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(t.data.Description))}};(0,a.ajax)(t)})},cancel3:function(){},onBackPress:function(t){this.value=!1}}};e.default=l}).call(this,n("0de9")["default"],n("6e42")["default"])},3632:function(t,e,n){"use strict";var o,a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",function(){return a}),n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o})},"46ce":function(t,e,n){"use strict";var o=n("1726"),a=n.n(o);a.a},"7ba2":function(t,e,n){"use strict";n.r(e);var o=n("1eb1"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,function(){return o[t]})}(i);e["default"]=a.a},b5a2:function(t,e,n){"use strict";(function(t){n("9fbb"),n("921b");o(n("66fd"));var e=o(n("fa4e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},fa4e:function(t,e,n){"use strict";n.r(e);var o=n("3632"),a=n("7ba2");for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);n("46ce");var s,c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"3ba3e17a",null,!1,o["a"],s);e["default"]=u.exports}},[["b5a2","common/runtime","common/vendor"]]]);