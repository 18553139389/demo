(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/set/set"],{"1f81":function(t,e,a){"use strict";a.r(e);var o=a("cbca"),n=a("9be5");for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);a("32c7");var s,c=a("f0c5"),d=Object(c["a"])(n["default"],o["b"],o["c"],!1,null,"2405ae24",null,!1,o["a"],s);e["default"]=d.exports},"224e":function(t,e,a){"use strict";(function(t){a("9fbb"),a("921b");o(a("66fd"));var e=o(a("1f81"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},"32c7":function(t,e,a){"use strict";var o=a("3915"),n=a.n(o);n.a},"36b9":function(t,e,a){"use strict";(function(t,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("01bc"),i=s(a("d4ef"));function s(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{Color:"#333",val:"",cnname:"",job:"",company:"",count:1,call:"",show:!1,check1:!1,check2:!1,modalName:null,radio:"0",oldRadio:"0",select:0,ids:"",version:"",navList:[]}},onShow:function(){t.getStorageSync("cnname")&&(this.cnname=t.getStorageSync("cnname")),t.getStorageSync("job")&&(this.job=t.getStorageSync("job")),this.version=t.getStorageSync("appversion"),this.init()},methods:{init:function(){var e=this,a={token:t.getStorageSync("token"),companyid:t.getStorageSync("id"),os:t.getSystemInfoSync().platform,osversion:t.getSystemInfoSync().system,appversion:t.getStorageSync("appversion")};i.default.showLoading("",function(){var o={url:"/api/CompanyUser/GetAppSetting",data:a,success:function(a){0==a.data.Code?(i.default.hideLoading(),e.company=a.data.Customerdata.companysetting.companyname,e.call=a.data.Customerdata.companysetting.tel,a.data.Customerdata.companysetting.companycount>1&&(e.count=a.data.Customerdata.companysetting.companycount,e.navList=a.data.Customerdata.companys,e.navList.forEach(function(t){1==t.isdefault&&(e.ids=t.id)}),e.show=!0),0==a.data.Customerdata.companysetting.notice_track?e.check1=!1:e.check1=!0,0==a.data.Customerdata.companysetting.notice_product?e.check2=!1:e.check2=!0):-2==a.data.Code||-1==a.data.Code?(i.default.hideLoading(),i.default.showToast(a.data.Description),t.removeStorageSync("token"),setTimeout(function(){t.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(a.data.Description))}};(0,n.ajax)(o)})},change1:function(){this.check1=!this.check1;var e=0,a=0;this.check1&&(e=1),this.check2&&(a=1);var o={token:t.getStorageSync("token"),companyid:this.ids,notice_track:e,notice_product:a,os:t.getSystemInfoSync().platform,osversion:t.getSystemInfoSync().system,appversion:t.getStorageSync("appversion")};i.default.showLoading("",function(){var e={url:"/api/CompanyUser/SaveAppSetting",data:o,success:function(e){0==e.data.Code?(i.default.hideLoading(),i.default.showToast("修改成功")):-2==e.data.Code||-1==e.data.Code?(i.default.hideLoading(),i.default.showToast(e.data.Description),t.removeStorageSync("token"),setTimeout(function(){t.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(e.data.Description))}};(0,n.ajax)(e)})},change2:function(){this.check2=!this.check2;var e=0,a=0;this.check1&&(e=1),this.check2&&(a=1);var o={token:t.getStorageSync("token"),companyid:this.ids,notice_track:e,notice_product:a,os:t.getSystemInfoSync().platform,osversion:t.getSystemInfoSync().system,appversion:t.getStorageSync("appversion")};i.default.showLoading("",function(){var e={url:"/api/CompanyUser/SaveAppSetting",data:o,success:function(e){0==e.data.Code?(i.default.hideLoading(),i.default.showToast("修改成功")):-2==e.data.Code||-1==e.data.Code?(i.default.hideLoading(),i.default.showToast(e.data.Description),t.removeStorageSync("token"),setTimeout(function(){t.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(e.data.Description))}};(0,n.ajax)(e)})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.radio=this.oldRadio,this.modalName=null},RadioChange:function(t){this.oldRadio=this.radio,this.radio=t.detail.value},goSure:function(){this.select=this.radio,this.modalName=null;var e=this,a={token:t.getStorageSync("token"),companyid:this.radio,os:t.getSystemInfoSync().platform,osversion:t.getSystemInfoSync().system,appversion:t.getStorageSync("appversion")};i.default.showLoading("",function(){var o={url:"/api/CompanyUser/ChangeDefaultCompany",data:a,success:function(a){0==a.data.Code?(i.default.hideLoading(),i.default.showToast("切换成功"),e.ids=e.radio,t.setStorageSync("id",e.radio),t.setStorageSync("token",a.data.Customerdata.token),t.setStorageSync("apisecret",a.data.Customerdata.apisecret),e.init()):-2==a.data.Code||-1==a.data.Code?(i.default.hideLoading(),i.default.showToast(a.data.Description),t.removeStorageSync("token"),setTimeout(function(){t.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(a.data.Description))}};(0,n.ajax)(o)})},modifyPass:function(){t.navigateTo({url:"/pages/modify/modify"})},goRead:function(){t.navigateTo({url:"/pages/read/read"})},goLoginout:function(){t.removeStorageSync("token"),t.redirectTo({url:"/pages/login/login"})},goVersion:function(){var e=this,a={token:t.getStorageSync("token"),os:t.getSystemInfoSync().platform,osversion:t.getSystemInfoSync().system,appversion:t.getStorageSync("appversion")};i.default.showLoading("",function(){var s={url:"/api/Upgrade/Req",data:a,success:function(a){console.log(o(JSON.stringify(a)," at pages\\set\\set.vue:340")),0==a.data.Code?(i.default.hideLoading(),0==a.data.Customerdata.isforce?t.showModal({title:"在线升级",content:a.data.Customerdata.Trips,success:function(t){t.confirm?(plus.nativeUI.showWaiting("下载最新文件中,请稍候..."),plus.downloader.createDownload(a.data.Customerdata.apk,{filename:"_doc/update/"},function(t,a){200==a?(plus.nativeUI.closeWaiting(),console.log(o("下载wgt成功："+t.filename," at pages\\set\\set.vue:355")),e.installWgt(t.filename)):(console.log(o("下载wgt失败！"," at pages\\set\\set.vue:358")),plus.nativeUI.alert("下载APP失败！"))}).start()):t.cancel&&console.log(o("用户点击取消"," at pages\\set\\set.vue:363"))}}):t.showModal({title:"在线升级",content:a.data.Customerdata.Trips,showCancel:!1,success:function(t){t.confirm?(plus.nativeUI.showWaiting("下载最新文件中,请稍候..."),plus.downloader.createDownload(a.data.Customerdata.apk,{filename:"_doc/update/"},function(t,a){200==a?(plus.nativeUI.closeWaiting(),console.log(o("下载wgt成功："+t.filename," at pages\\set\\set.vue:380")),e.installWgt(t.filename)):(console.log(o("下载wgt失败！"," at pages\\set\\set.vue:383")),plus.nativeUI.alert("下载APP失败！"))}).start()):t.cancel&&console.log(o("用户点击取消"," at pages\\set\\set.vue:388"))}})):-1==a.data.Code?(i.default.hideLoading(),i.default.showToast(a.data.Description)):-2==a.data.Code?(i.default.hideLoading(),i.default.showToast(a.data.Description),t.removeStorageSync("token"),setTimeout(function(){t.redirectTo({url:"/pages/login/login"})},500)):(i.default.hideLoading(),i.default.showToast(a.data.Description))}};(0,n.ajax)(s)})},installWgt:function(t){plus.nativeUI.showWaiting("正在安装..."),plus.runtime.install(t,{force:!0},function(){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("APP更新完成！",function(){plus.runtime.restart()})},function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("安装失败："+t.message)})}}};e.default=c}).call(this,a("6e42")["default"],a("0de9")["default"])},3915:function(t,e,a){},"9be5":function(t,e,a){"use strict";a.r(e);var o=a("36b9"),n=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);e["default"]=n.a},cbca:function(t,e,a){"use strict";var o,n=function(){var t=this,e=t.$createElement;t._self._c},i=[];a.d(e,"b",function(){return n}),a.d(e,"c",function(){return i}),a.d(e,"a",function(){return o})}},[["224e","common/runtime","common/vendor"]]]);