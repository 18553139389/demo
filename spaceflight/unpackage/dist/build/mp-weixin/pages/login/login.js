(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"457f":function(e,o,n){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var t=c(n("ba6d")),a=n("8442");c(n("80d0"));function c(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{Color:"#333",backColor:"#fff",show:!1,code:"",userInfo:{},session_key:"",phoneNumber:""}},onLoad:function(){},methods:{getuserinfo:function(o){console.log(o),console.log(o.detail.userInfo);var n=this;e.getSetting({success:function(t){t.authSetting["scope.userInfo"]?(console.log("授权"),n.userInfo=o.detail.userInfo,console.log(n.userInfo),e.login({provider:"weixin",success:function(e){console.log(e),n.code=e.code,n.show=!0,wx.request({url:"https://api.weixin.qq.com/sns/jscode2session?appid=wx88deffbcececf498&secret=6e2d06e118da54b978e7d250e28822be&js_code="+n.code+"&grant_type=authorization_code",method:"POST",header:{"content-type":"application/json"},success:function(e){console.log(e),n.session_key=e.data.session_key}})},fail:function(e){console.log(e)}})):console.log("当前未授权")}})},getuserinfos:function(o){var n=this;e.getStorageSync("uid")?this.login(e.getStorageSync("uid"),e.getStorageSync("rongYunToken")):e.getSetting({success:function(e){e.authSetting["scope.userInfo"]?(console.log("授权"),n.userInfo=o.detail.userInfo,n.show=!0):console.log("当前未授权")}})},login:function(o,n){t.default.showLoading("登录中...",(function(){wx.$app.login({userID:o,userSig:n}).then((function(){t.default.hideLoading(),setTimeout((function(){e.reLaunch({url:"/pages/index/index"})}),500)})).catch((function(){t.default.hideLoading(),t.default.showToast("登录失败")}))}))},getMessage:function(){var o=this;e.login({provider:"weixin",success:function(n){console.log(n),o.code=n.code;var c={code:o.code,headImage:o.userInfo.avatarUrl,nickName:o.userInfo.nickName,phone:o.phoneNumber},i={url:"/api/wxLogin",data:c,success:function(n){console.log(n),0==n.data.result?(e.setStorageSync("uid",n.data.uid),e.setStorageSync("rongYunToken",n.data.usersig),e.setStorageSync("nick",n.data.nickName),e.setStorageSync("icon",n.data.headImage),e.setStorageSync("vip",n.data.vip),wx.$app.updateMyProfile({nick:e.getStorageSync("nick"),avatar:e.getStorageSync("icon")}),setTimeout((function(){o.login(n.data.uid,n.data.usersig)}),100),e.reLaunch({url:"/pages/index/index"})):(t.default.hideLoading(),t.default.showToast(n.data.resultNote))}};(0,a.ajax)(i)},fail:function(e){console.log(e)}})},decryptPhoneNumber:function(o){console.log(o);var n=this;"getPhoneNumber:fail user deny"!=o.detail.errMsg&&e.login({provider:"weixin",success:function(e){console.log(e),n.code=e.code;var c={code:n.code,iv:o.detail.iv,encryptedData:o.detail.encryptedData},i={url:"/api/bindPhone",data:c,success:function(e){console.log(e),0==e.data.result?(n.show=!1,n.phoneNumber=e.data.phone,n.getMessage()):t.default.showToast(e.data.resultNote)}};(0,a.ajax)(i)},fail:function(e){console.log(e)}})}}};o.default=i}).call(this,n("543d")["default"])},"56b6":function(e,o,n){"use strict";var t,a=function(){var e=this,o=e.$createElement;e._self._c},c=[];n.d(o,"b",(function(){return a})),n.d(o,"c",(function(){return c})),n.d(o,"a",(function(){return t}))},"5a00":function(e,o,n){"use strict";(function(e){n("e91d");t(n("66fd"));var o=t(n("ef90"));function t(e){return e&&e.__esModule?e:{default:e}}e(o.default)}).call(this,n("543d")["createPage"])},"66a0":function(e,o,n){"use strict";n.r(o);var t=n("457f"),a=n.n(t);for(var c in t)"default"!==c&&function(e){n.d(o,e,(function(){return t[e]}))}(c);o["default"]=a.a},"82ea":function(e,o,n){"use strict";var t=n("b2e5"),a=n.n(t);a.a},b2e5:function(e,o,n){},ef90:function(e,o,n){"use strict";n.r(o);var t=n("56b6"),a=n("66a0");for(var c in a)"default"!==c&&function(e){n.d(o,e,(function(){return a[e]}))}(c);n("82ea");var i,s=n("f0c5"),u=Object(s["a"])(a["default"],t["b"],t["c"],!1,null,"76b9a112",null,!1,t["a"],i);o["default"]=u.exports}},[["5a00","common/runtime","common/vendor"]]]);