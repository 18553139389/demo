(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/message/message"],{"0429":function(t,e,n){"use strict";var o=n("e665"),a=n.n(o);a.a},"28b2":function(t,e,n){"use strict";n.r(e);var o=n("ebdd"),a=n("2c02");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("0429");var s,c=n("f0c5"),l=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"5b9d30e4",null,!1,o["a"],s);e["default"]=l.exports},"2c02":function(t,e,n){"use strict";n.r(e);var o=n("c8bf"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},c8bf:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=s(n("ba6d")),a=n("8442"),i=n("2f62");function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=function(){Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(function(){return resolve(n("321a"))}.bind(null,n)).catch(n.oe)},d={data:function(){return{Color:"#333",backColor:"#fff",list:[],mescroll:null,downOption:{use:!0,auto:!0,autoShowLoading:!0,isLock:!1,isBoth:!0,offset:80,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ..."},upOption:{use:!0,auto:!0,isLock:!1,isBoth:!0,page:{num:0,size:10,time:null},noMoreSize:6,textLoading:"加载中 ...",textNoMore:"-- 没有更多数据 --",toTop:{src:"http://www.mescroll.com/img/mescroll-totop.png",offset:1e3,duration:300},empty:{use:!0,icon:"http://www.mescroll.com/img/mescroll-empty.png",tip:"没有新的数据"}},conversation:{}}},components:{MescrollUni:u},onUnload:function(){this.mescroll=null},onReachBottom:function(){this.mescroll&&this.mescroll.onReachBottom()},onPageScroll:function(t){this.mescroll&&this.mescroll.onPageScroll(t)},onShow:function(){this.mescroll&&(this.list=[],this.mescroll.resetUpScroll())},computed:l({},(0,i.mapState)({allConversation:function(t){return t.conversation.allConversation}}),{},(0,i.mapGetters)(["totalUnreadCount","myInfo"])),methods:{goDetail:function(e,n){t.navigateTo({url:"/pages/messageDetail/messageDetail?id="+e+"&time="+n})},mescrollInit:function(t){this.mescroll=t},downCallback:function(t){this.list=[],this.mescroll.resetUpScroll()},upCallback:function(t){t.num,t.size;var e=this;e.init(t)},topClick:function(){console.log("点击了回到顶部按钮")},init:function(e){var n=this,i={uid:t.getStorageSync("uid"),pageSize:e.size,pageNo:e.num};o.default.showLoading("",(function(){var t={url:"/api/myMessage",data:i,success:function(t){if(console.log(t),0==t.data.result){if(o.default.hideLoading(),t.data.dataList)for(var a=0;a<t.data.dataList.length;a++)n.list.push(t.data.dataList[a])}else o.default.hideLoading(),o.default.showToast(t.data.resultNote);var i=[];t.data.dataList&&(i=t.data.dataList);var s=1;t.data.totalPage&&(s=t.data.totalPage),e.endByPage(i.length,s)}};(0,a.ajax)(t)}))},add0:function(t){return t<10?"0"+t:t},format:function(t){var e=new Date(t),n=e.getFullYear(),o=e.getMonth()+1,a=e.getDate(),i=e.getHours(),s=e.getMinutes(),c=e.getSeconds();return n+"-"+this.add0(o)+"-"+this.add0(a)+" "+this.add0(i)+":"+this.add0(s)+":"+this.add0(c)},setMessageRead:function(t){0!==t.unreadCount&&wx.$app.setMessageRead({conversationID:t.conversationID})},goTalk:function(e,n){this.setMessageRead(n),wx.$app.updateMyProfile({nick:t.getStorageSync("nick"),avatar:t.getStorageSync("icon")}),this.empty(e)},empty:function(t){this.$store.dispatch("checkoutConversation","C2C".concat(t)).then((function(){})).catch((function(){}))},longTimePress:function(t){this.conversation=t,this.handleModalShow()},handleModalShow:function(){var e=this;t.showModal({title:"提示",content:"确认删除此会话吗",success:function(t){t.confirm?e.handleConfirm():t.cancel&&console.log("用户点击取消")}})},handleConfirm:function(){this.deleteConversation(this.conversation)},deleteConversation:function(t){console.log(t),wx.$app.deleteConversation(t.conversationID).then((function(t){console.log("delete success",t)}))},DelNotice:function(e,n){var o=this;t.showModal({title:"提示",content:"确认删除此通知吗",success:function(t){t.confirm?o.delMessage(e,n):t.cancel&&console.log("用户点击取消")}})},delMessage:function(t,e){var n=this,i={mid:t};o.default.showLoading("",(function(){var t={url:"/api/delMessage",data:i,success:function(t){console.log(t),0==t.data.result?(o.default.hideLoading(),n.list.splice(e,1),o.default.showToast("删除成功")):(o.default.hideLoading(),o.default.showToast(t.data.resultNote))}};(0,a.ajax)(t)}))}}};e.default=d}).call(this,n("543d")["default"])},d5cf:function(t,e,n){"use strict";(function(t){n("e91d");o(n("66fd"));var e=o(n("28b2"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},e665:function(t,e,n){},ebdd:function(t,e,n){"use strict";var o={mescrollUni:function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"321a"))}},a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}))}},[["d5cf","common/runtime","common/vendor"]]]);