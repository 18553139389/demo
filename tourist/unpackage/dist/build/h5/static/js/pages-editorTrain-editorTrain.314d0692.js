(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-editorTrain-editorTrain"],{6341:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("3b2b"),a("a481"),a("386d"),a("28a5");var i=a("ad18"),s=a("f42a"),n={data:function(){return{Color:"#DE2910",value:"",backColor:"#FFFFFF",user:"",cardType:"身份证",card:"",tel:"",show:!1,text:"新增乘客",birthday:"",show3:!1,currentTime:new Date,minDate:new Date("1900-01-01"),sub:!1,columns:[{id:0,text:"身份证"},{id:1,text:"护照"},{id:4,text:"港澳通行证"},{id:6,text:"台湾通行证"}],index:0,userList:{},type:"",userId:""}},components:{Toast:i.Toast,Dialog:i.Dialog},onLoad:function(e){if(this.getRequest("uid")){var a=this.getRequest("uid");this.$store.commit("changeUid",a)}var i=this;if(this.type=e.type,1==e.type){this.userId=e.id;var n=e.id;this.text="编辑乘客";var o={uid:this.$store.state.uid},c={url:"/api/gzh/passengerList",data:o,success:function(e){if(t.log(e),0==e.data.result)for(var a=0;a<e.data.dataList.length;a++)n==e.data.dataList[a].id&&(i.userList=e.data.dataList[a],t.log(i.userList),i.user=i.userList.username,0==i.userList.cardType?i.cardType="身份证":1==i.userList.cardType?i.cardType="护照":4==i.userList.cardType?i.cardType="港澳通行证":6==i.userList.cardType&&(i.cardType="台湾通行证"),i.tel=i.userList.phone,i.card=i.userList.cardNo,i.birthday=i.userList.birthday.split("/").join("-"))}};(0,s.ajaxs)(c)}},methods:{getRequest:function(t){for(var e=window.location.search.substring(1),a=e.split("&"),i=0;i<a.length;i++){var s=a[i].split("=");if(s[0]==t)return s[1]}return!1},onCancel:function(){this.show=!1},onConfirm:function(e){t.log(e),this.show=!1,this.cardType=e.text,this.index=e.id},cancel3:function(){this.show3=!1},confirm3:function(e){this.show3=!1,this.birthday=this.dateFtt("yyyy-MM-dd",e),t.log(this.birthday)},choice:function(){this.show=!0},choiceBirth:function(){this.show3=!0},dateFtt:function(t,e){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t},goRight:function(){var e=this;i.Dialog.confirm({title:"删除",message:"确认删除此编辑人吗"}).then(function(){var a={uid:e.$store.state.uid,passengerId:e.userId},n={url:"/api/gzh/delPassenger",data:a,success:function(e){t.log(e),0==e.data.result?((0,i.Toast)("删除成功"),setTimeout(function(){uni.navigateBack({delta:1})},300)):(0,i.Toast)(e.data.resultNote)}};(0,s.ajaxs)(n)}).catch(function(){})},submit:function(){if(""!=this.user)if(""!=this.card){if("身份证"==this.cardType){var e=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/;if(!e.test(this.card))return void(0,i.Toast)("身份证不合法")}if(""!=this.birthday)if(""!=this.tel)if(/^1[345789]\d{9}$/.test(this.tel)){var a=this;if(this.sub=!0,0==this.type){var n={url:"/api/gzh/savePassenger",data:{uid:this.$store.state.uid,username:this.user,cardType:this.index,cardNo:this.card,phone:this.tel,birthday:this.birthday},success:function(e){t.log(e),0==e.data.result?(a.sub=!1,(0,i.Toast)("新增成功"),setTimeout(function(){uni.navigateBack({delta:1})},500)):(0,i.Toast)(e.data.resultNote)}};(0,s.ajaxs)(n)}else if(1==this.type){var o={url:"/api/gzh/savePassenger",data:{uid:this.$store.state.uid,passengerId:this.userId,username:this.user,cardType:this.index,cardNo:this.card,phone:this.tel,birthday:this.birthday},success:function(e){t.log(e),0==e.data.result?(a.sub=!1,(0,i.Toast)("编辑成功"),setTimeout(function(){uni.navigateBack({delta:1})},500)):(0,i.Toast)(e.data.resultNote)}};(0,s.ajaxs)(o)}}else(0,i.Toast)("手机号格式不正确");else(0,i.Toast)("手机号不能为空");else(0,i.Toast)("请选择出生日期")}else(0,i.Toast)("证件号码不能为空");else(0,i.Toast)("姓名不能为空")}}};e.default=n}).call(this,a("5a52")["default"])},"657a":function(t,e,a){"use strict";a.r(e);var i=a("6341"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);e["default"]=s.a},"7ce3":function(t,e,a){var i=a("b2c3");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("ea317f20",i,!0,{sourceMap:!1,shadowMode:!1})},"8d07":function(t,e,a){"use strict";a.r(e);var i=a("cdbf"),s=a("657a");for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);a("d7e1");var o=a("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"5e24c6e9",null);e["default"]=c.exports},b2c3:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,".contain[data-v-5e24c6e9]{width:100%;height:100%;background:#fff}.van-popup[data-v-5e24c6e9]{background:none!important}.lists[data-v-5e24c6e9]{width:100%;padding:0 %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box;border-top:8px solid #f8f8f8;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.cards[data-v-5e24c6e9],.listMsg[data-v-5e24c6e9]{width:100%;height:%?90?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:14px;color:#333;border-bottom:1px solid #eee}.head[data-v-5e24c6e9]{width:%?160?%;height:%?90?%;line-height:%?90?%}.card>uni-input[data-v-5e24c6e9],.listMsg>uni-input[data-v-5e24c6e9]{margin-left:%?50?%;font-size:14px}.cards>img[data-v-5e24c6e9]{width:%?24?%;float:right}.cards[data-v-5e24c6e9]{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.card[data-v-5e24c6e9]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.submit[data-v-5e24c6e9]{width:70%;height:%?90?%;line-height:%?90?%;text-align:center;font-size:15px;color:#fff;border-radius:4px;background:#de2910;margin:%?160?% auto}",""])},ba84:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAA6UlEQVRYR8XXzQ3CMAyGYbsTRckCdAM2ADZgE9gAmIAVWCBVRmGBSKhXhIh/PkOuTvU+7cUq058Pj/qllC0R7Xrvh9bac3RfO5cC7kTUeu8zGjEErG+Uc94z8yUCIQJEIsSAKIQKEIFQA9AIEwCJMANQCBcAgXADvAgIwIOAAawIKMCCgAPeEI9a6/xtQ4YASinXdYUT0a3Wuv8pQBNfYdAvoI1DAZY4DGCNQwCeuBvgjbsAiLgZgIqbAMi4GoCOqwARcTEgKi4C5JyPzHySLBbtf6EIkFJK0zRtlmU5WwKjZ6DLaBT7NH8Bz0DMId00QY0AAAAASUVORK5CYII="},cdbf:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"contain"},[i("v-uni-view",{staticClass:"fixed"},[i("cu-custom",{attrs:{isBack:!0,Color:t.Color,backColor:t.backColor,isIcon:!0,bgColor:"bg-shadeTop text-white"},on:{goRight:function(e){e=t.$handleEvent(e),t.goRight(e)}}},[i("template",{attrs:{slot:"backText"},slot:"backText"}),i("template",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.text))]),i("template",{attrs:{slot:"right"},slot:"right"},[0!=t.type?i("v-uni-view",[t._v("删除")]):t._e()],1)],2)],1),i("v-uni-view",{staticClass:"lists"},[i("v-uni-view",{staticClass:"listMsg"},[i("v-uni-view",{staticClass:"head"},[t._v("姓名")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请与证件保持一致"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),i("v-uni-view",{staticClass:"cards",on:{click:function(e){e=t.$handleEvent(e),t.choice(e)}}},[i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"head"},[t._v("证件类型")]),i("v-uni-input",{attrs:{type:"text",placeholder:"身份证",disabled:""},model:{value:t.cardType,callback:function(e){t.cardType=e},expression:"cardType"}})],1),i("img",{attrs:{src:a("ba84"),alt:""}})],1),i("v-uni-view",{staticClass:"cards",on:{click:function(e){e=t.$handleEvent(e),t.choiceBirth(e)}}},[i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"head"},[t._v("出生日期")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请选择出生日期",disabled:""},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}})],1),i("img",{attrs:{src:a("ba84"),alt:""}})],1),i("v-uni-view",{staticClass:"listMsg"},[i("v-uni-view",{staticClass:"head"},[t._v("证件号码")]),i("v-uni-input",{attrs:{type:"text",placeholder:"请与证件保持一致"},model:{value:t.card,callback:function(e){t.card=e},expression:"card"}})],1),i("v-uni-view",{staticClass:"listMsg"},[i("v-uni-view",{staticClass:"head"},[t._v("手机号码")]),i("v-uni-input",{attrs:{type:"text",placeholder:"用于接受出票通知"},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}})],1)],1),i("v-uni-view",{staticClass:"submit",on:{click:function(e){e=t.$handleEvent(e),t.submit(e)}}},[t._v("确定")]),i("van-popup",{attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){e=t.$handleEvent(e),t.onCancel(e)},confirm:function(e){e=t.$handleEvent(e),t.onConfirm(e)}}})],1),i("van-popup",{attrs:{position:"bottom",overlay:!0},model:{value:t.show3,callback:function(e){t.show3=e},expression:"show3"}},[i("van-datetime-picker",{attrs:{type:"date","min-date":t.minDate},on:{cancel:function(e){e=t.$handleEvent(e),t.cancel3(e)},confirm:function(e){e=t.$handleEvent(e),t.confirm3(e)}},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),i("van-popup",{attrs:{"close-on-click-overlay":!1},model:{value:t.sub,callback:function(e){t.sub=e},expression:"sub"}},[i("van-loading",{attrs:{type:"spinner"}})],1)],1)},s=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s})},d7e1:function(t,e,a){"use strict";var i=a("7ce3"),s=a.n(i);s.a},f42a:function(t,e,a){"use strict";(function(t){var i=a("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.ajaxs=e.ajax=void 0;var s=i(a("f499")),n=function(e){e=e||{},e.url=e.url||"",e.data=(0,s.default)(e.data||{}),e.method=e.method||"POST",e.header=e.header||{"Content-Type":"application/json"},e.success=e.success||function(){},e.fail=e.fail||function(){},t.log(e.data),uni.request({url:"https://m.xgcyz1978.com"+e.url,data:e.data,method:e.method,header:e.header,dataType:"json",success:function(t){e.success(t)},fail:function(t){e.fail(t),uni.showToast({title:"请稍后重试",icon:"none"})}})};e.ajax=n;var o=function(e){e=e||{},e.url=e.url||"",e.data=(0,s.default)(e.data||{}),e.method=e.method||"POST",e.header=e.header||{"Content-Type":"application/json"},e.success=e.success||function(){},e.fail=e.fail||function(){},t.log(e.data),uni.request({url:"https://m.xgcyz1978.com"+e.url,data:e.data,method:e.method,header:e.header,dataType:"json",success:function(t){e.success(t)},fail:function(t){e.fail(t),uni.showToast({title:"请稍后重试",icon:"none"})}})};e.ajaxs=o}).call(this,a("5a52")["default"])}}]);